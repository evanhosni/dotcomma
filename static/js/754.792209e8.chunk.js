!function(){var n={564:function(n,e,t){"use strict";var r,o,i=t(675),a=t(5544),c=t(467),u=t(2283),s=t(9408),f=t(4334),d=t.n(f);(o=r||(r={})).randRange=function(n,e){return Math.random()*(e-n)+n},o.randNormalish=function(){return(Math.random()+Math.random()+Math.random()+Math.random())/4*2-1},o.randInt=function(n,e){return Math.round(Math.random()*(e-n)+n)},o.lerp=function(n,e,t){return n*(t-e)+e},o.smoothstep=function(n,e,t){return(n=n*n*(3-2*n))*(t-e)+e},o.smootherstep=function(n,e,t){return(n=n*n*n*(n*(6*n-15)+10))*(t-e)+e},o.clamp=function(n,e,t){return Math.min(Math.max(n,e),t)},o.sat=function(n){return Math.min(Math.max(n,0),1)},o.seedRand=function(n){return d()(n+"mynamebierce")()};var l=t(3029),h=t(2901),p=function(){function n(){(0,l.A)(this,n),this.queue=[],this.isProcessing=!1}return(0,h.A)(n,[{key:"addTask",value:function(n){this.queue.push(n),this.processQueue()}},{key:"processQueue",value:function(){var n=(0,c.A)((0,i.A)().mark((function n(){var e;return(0,i.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isProcessing){n.next=2;break}return n.abrupt("return");case 2:this.isProcessing=!0;case 3:if(!(this.queue.length>0)){n.next=9;break}return e=this.queue.shift(),n.next=7,e();case 7:n.next=3;break;case 9:this.isProcessing=!1;case 10:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}]),n}(),g=function(n){return n.CREATE="create",n.CREATE_BULK="create-bulk",n.GET_CURRENT_REGION="get-current-region",n.GET_CURRENT_REGION_SITE="get-current-region-site",n.GET_CURRENT_BIOME="get-current-biome",n.GET_CURRENT_BIOME_SITE="get-current-biome-site",n.GET_WALLS="get-walls",n.GET_DISTANCE_TO_WALL="get-distance-to-wall",n}({}),x={},v=new p;function y(){return(y=(0,c.A)((0,i.A)().mark((function n(e){var t,o,c,f,d,l,h,p,v,y,m,T,w;return(0,i.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.type,o=e.params,c=function(n){var e=n,t=e.seed,o=e.currentVertex,i=e.regionGridSize,a=e.regions,c=e.gridSize,u=e.biomes,g=[];if(i&&null!==a&&void 0!==a&&a.length){var x=f({seed:"".concat(t," - regionGrid"),currentVertex:new s.Vector2(o.x,o.y),cellArray:a,gridSize:i,gridFunction:function(n,e){var t=r.seedRand(JSON.stringify(n));return e[Math.floor(t*e.length)]}});g=f({seed:"".concat(t," - grid"),currentVertex:new s.Vector2(o.x,o.y),cellArray:x,gridSize:c,gridFunction:function(n,e){e.sort((function(e,t){return n.distanceTo(e.point)-n.distanceTo(t.point)}));var t=e[0].element,o=r.seedRand(JSON.stringify(n));return t.biomes[Math.floor(o*t.biomes.length)]}})}else null!==u&&void 0!==u&&u.length&&(g=f({seed:"".concat(t," - grid"),currentVertex:new s.Vector2(o.x,o.y),cellArray:u,gridSize:c,gridFunction:function(n,e){var t=r.seedRand(JSON.stringify(n));return e[Math.floor(t*e.length)]}}));var m=h(new s.Vector2(o.x,o.y),g),T=p(new s.Vector2(o.x,o.y),g),w=d(new s.Vector2(o.x,o.y),g),M=l(new s.Vector2(o.x,o.y),g),b=v({seed:"".concat(t," - walls"),currentVertex:new s.Vector2(o.x,o.y),grid:g,gridSize:c});return{currentVertex:o,grid:g,region:m,regionSite:T,biome:w,biomeSite:M,walls:b,distance:y({currentVertex:new s.Vector2(o.x,o.y),walls:b})}},f=function(n){var e=n.seed,t=n.currentVertex,o=n.cellArray,i=n.gridSize,c=n.gridFunction,u=[Math.floor(t.x/i),Math.floor(t.y/i)],f=u[0],d=u[1];x[e]||(x[e]={});var l=x[e],h="".concat(f,",").concat(d),p=l[h];if(!p){p=[];for(var g=f-2;g<=f+2;g++)for(var v=d-2;v<=d+2;v++){var y=r.seedRand("".concat(e," - ").concat(g,"X").concat(v)),m=r.seedRand("".concat(e," - ").concat(g,"Y").concat(v)),T=new s.Vector2((g+y)*i,(v+m)*i),w=c(T,o);p.push({point:T,element:w})}l[h]=p}for(var M in l){var b=M.split(",").map(Number),E=(0,a.A)(b,2),A=E[0],V=E[1];(Math.abs(f-A)>5||Math.abs(d-V)>5)&&delete l[M]}return p},d=function(n,e){return e.sort((function(e,t){return n.distanceTo(e.point)-n.distanceTo(t.point)})),e[0].element},l=function(n,e){return e.sort((function(e,t){return n.distanceTo(e.point)-n.distanceTo(t.point)})),e[0].point},h=function(n,e){return e.sort((function(e,t){return n.distanceTo(e.point)-n.distanceTo(t.point)})),e[0].element},p=function(n,e){return e.sort((function(e,t){return n.distanceTo(e.point)-n.distanceTo(t.point)})),e[0].point},v=function(n){var e=n.seed,t=n.currentVertex,r=n.grid,o=n.gridSize,i=[Math.floor(t.x/o),Math.floor(t.y/o)],c=i[0],f=i[1];x[e]||(x[e]={});for(var d=x[e],l=r.map((function(n){return n.point})),h=u.A.from(l.map((function(n){return[n.x,n.y]}))),p=[],g=0;g<h.triangles.length;g+=3){var v=l[h.triangles[g]],y=l[h.triangles[g+1]],m=l[h.triangles[g+2]],T=v.x*v.x+v.y*v.y,w=y.x*y.x+y.y*y.y,M=m.x*m.x+m.y*m.y,b=2*(v.x*(y.y-m.y)+y.x*(m.y-v.y)+m.x*(v.y-y.y)),E=new s.Vector3(1/b*(T*(y.y-m.y)+w*(m.y-v.y)+M*(v.y-y.y)),1/b*(T*(m.x-y.x)+w*(v.x-m.x)+M*(y.x-v.x)),0);p.push(E)}for(var A,V=[],R=function(){var n=h.halfedges[_];if(-1!==n){var e=p[Math.floor(_/3)],t=p[Math.floor(n/3)],o=new s.Vector2((e.x+t.x)/2,(e.y+t.y)/2),u="".concat(Math.floor(o.x),",").concat(Math.floor(o.y));if(void 0===d[u])for(var l in A=r.sort((function(n,e){return n.point.distanceTo(o)-e.point.distanceTo(o)})),d[u]={grid:i,joinable:A[0].element.joinable&&A[0].element===A[1].element},d){var g=(0,a.A)(d[l].grid,2),x=g[0],v=g[1];(Math.abs(c-x)>5||Math.abs(f-v)>5)&&delete d[l]}d[u].joinable||V.push(new s.Line3(e,t))}},_=0;_<h.halfedges.length;_++)R();return V},y=function(n){for(var e=n.currentVertex,t=n.walls,r=new s.Vector3(e.x,e.y,0),o=[],i=0;i<t.length;i++){var a=new s.Vector3(0,0,0);new s.Line3(t[i].start,t[i].end).closestPointToPoint(r,!0,a),o.push(a)}return o.sort((function(n,e){return n.distanceTo(r)-e.distanceTo(r)})),o[0]?r.distanceTo(o[0]):1/0},t===g.CREATE&&(m=c(o),self.postMessage(m)),t===g.CREATE_BULK&&(T=o.map((function(n){return c(n)})),self.postMessage({type:g.CREATE_BULK,results:T})),t===g.GET_DISTANCE_TO_WALL&&(w=y(o),self.postMessage(w));case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}self.onmessage=function(n){v.addTask((function(){return function(n){return y.apply(this,arguments)}(n.data)}))}},1234:function(){}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=n,t.x=function(){var n=t.O(void 0,[456,371],(function(){return t(564)}));return n=t.O(n)},t.amdD=function(){throw new Error("define cannot be used indirect")},t.amdO={},function(){var n=[];t.O=function(e,r,o,i){if(!r){var a=1/0;for(f=0;f<n.length;f++){r=n[f][0],o=n[f][1],i=n[f][2];for(var c=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(t.O).every((function(n){return t.O[n](r[u])}))?r.splice(u--,1):(c=!1,i<a&&(a=i));if(c){n.splice(f--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var f=n.length;f>0&&n[f-1][2]>i;f--)n[f]=n[f-1];n[f]=[r,o,i]}}(),t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,{a:e}),e},t.d=function(n,e){for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.f={},t.e=function(n){return Promise.all(Object.keys(t.f).reduce((function(e,r){return t.f[r](n,e),e}),[]))},t.u=function(n){return"static/js/"+n+"."+{371:"1e2d1a8e",456:"2f6077d1"}[n]+".chunk.js"},t.miniCssF=function(n){},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n},t.p="/",function(){var n={754:1,373:1};t.f.i=function(e,r){n[e]||importScripts(t.p+t.u(e))};var e=self.webpackChunkdotcomma=self.webpackChunkdotcomma||[],r=e.push.bind(e);e.push=function(e){var o=e[0],i=e[1],a=e[2];for(var c in i)t.o(i,c)&&(t.m[c]=i[c]);for(a&&a(t);o.length;)n[o.pop()]=1;r(e)}}(),function(){var n=t.x;t.x=function(){return Promise.all([t.e(456),t.e(371)]).then(n)}}();t.x()}();
//# sourceMappingURL=754.792209e8.chunk.js.map