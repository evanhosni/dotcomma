!function(){var e={564:function(e,n,t){"use strict";var r,o,i=t(675),a=t(5544),c=t(467),u=t(2283),s=t(9408),f=t(4334),d=t.n(f);(o=r||(r={})).randRange=function(e,n){return Math.random()*(n-e)+e},o.randNormalish=function(){return(Math.random()+Math.random()+Math.random()+Math.random())/4*2-1},o.randInt=function(e,n){return Math.round(Math.random()*(n-e)+e)},o.lerp=function(e,n,t){return e*(t-n)+n},o.smoothstep=function(e,n,t){return(e=e*e*(3-2*e))*(t-n)+n},o.smootherstep=function(e,n,t){return(e=e*e*e*(e*(6*e-15)+10))*(t-n)+n},o.clamp=function(e,n,t){return Math.min(Math.max(e,n),t)},o.sat=function(e){return Math.min(Math.max(e,0),1)},o.seedRand=function(e){return d()(e+"mynamebierce")()};var l=t(3029),h=t(2901),p=function(){function e(){(0,l.A)(this,e),this.queue=[],this.isProcessing=!1,this.taskIdCounter=0}return(0,h.A)(e,[{key:"addTask",value:function(e){var n="task-".concat(this.taskIdCounter++);return this.queue.push({id:n,task:e}),this.processQueue(),n}},{key:"removeTask",value:function(e){var n=this.queue.length;return this.queue=this.queue.filter((function(n){return n.id!==e})),n!==this.queue.length}},{key:"processQueue",value:function(){var e=(0,c.A)((0,i.A)().mark((function e(){var n,t;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isProcessing){e.next=2;break}return e.abrupt("return");case 2:this.isProcessing=!0;case 3:if(!(this.queue.length>0)){e.next=15;break}return n=this.queue.shift(),t=n.task,e.prev=5,e.next=8,t();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Error processing task:",e.t0);case 13:e.next=3;break;case 15:this.isProcessing=!1;case 16:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),g=function(e){return e.CREATE="create",e.CREATE_BULK="create-bulk",e.GET_CURRENT_REGION="get-current-region",e.GET_CURRENT_REGION_SITE="get-current-region-site",e.GET_CURRENT_BIOME="get-current-biome",e.GET_CURRENT_BIOME_SITE="get-current-biome-site",e.GET_WALLS="get-walls",e.GET_DISTANCE_TO_WALL="get-distance-to-wall",e}({}),v={},x=new p;function y(){return(y=(0,c.A)((0,i.A)().mark((function e(n){var t,o,c,f,d,l,h,p,x,y,m,T,w;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.type,o=n.params,c=function(e){var n=e,t=n.seed,o=n.currentVertex,i=n.regionGridSize,a=n.regions,c=n.gridSize,u=n.biomes,g=[];if(i&&null!==a&&void 0!==a&&a.length){var v=f({seed:"".concat(t," - regionGrid"),currentVertex:new s.Vector2(o.x,o.y),cellArray:a,gridSize:i,gridFunction:function(e,n){var t=r.seedRand(JSON.stringify(e));return n[Math.floor(t*n.length)]}});g=f({seed:"".concat(t," - grid"),currentVertex:new s.Vector2(o.x,o.y),cellArray:v,gridSize:c,gridFunction:function(e,n){n.sort((function(n,t){return e.distanceTo(n.point)-e.distanceTo(t.point)}));var t=n[0].element,o=r.seedRand(JSON.stringify(e));return t.biomes[Math.floor(o*t.biomes.length)]}})}else null!==u&&void 0!==u&&u.length&&(g=f({seed:"".concat(t," - grid"),currentVertex:new s.Vector2(o.x,o.y),cellArray:u,gridSize:c,gridFunction:function(e,n){var t=r.seedRand(JSON.stringify(e));return n[Math.floor(t*n.length)]}}));var m=h(new s.Vector2(o.x,o.y),g),T=p(new s.Vector2(o.x,o.y),g),w=d(new s.Vector2(o.x,o.y),g),M=l(new s.Vector2(o.x,o.y),g),b=x({seed:"".concat(t," - walls"),currentVertex:new s.Vector2(o.x,o.y),grid:g,gridSize:c});return{currentVertex:o,grid:g,region:m,regionSite:T,biome:w,biomeSite:M,walls:b,distance:y({currentVertex:new s.Vector2(o.x,o.y),walls:b})}},f=function(e){var n=e.seed,t=e.currentVertex,o=e.cellArray,i=e.gridSize,c=e.gridFunction,u=[Math.floor(t.x/i),Math.floor(t.y/i)],f=u[0],d=u[1];v[n]||(v[n]={});var l=v[n],h="".concat(f,",").concat(d),p=l[h];if(!p){p=[];for(var g=f-2;g<=f+2;g++)for(var x=d-2;x<=d+2;x++){var y=r.seedRand("".concat(n," - ").concat(g,"X").concat(x)),m=r.seedRand("".concat(n," - ").concat(g,"Y").concat(x)),T=new s.Vector2((g+y)*i,(x+m)*i),w=c(T,o);p.push({point:T,element:w})}l[h]=p}for(var M in l){var b=M.split(",").map(Number),E=(0,a.A)(b,2),k=E[0],A=E[1];(Math.abs(f-k)>5||Math.abs(d-A)>5)&&delete l[M]}return p},d=function(e,n){return n.sort((function(n,t){return e.distanceTo(n.point)-e.distanceTo(t.point)})),n[0].element},l=function(e,n){return n.sort((function(n,t){return e.distanceTo(n.point)-e.distanceTo(t.point)})),n[0].point},h=function(e,n){return n.sort((function(n,t){return e.distanceTo(n.point)-e.distanceTo(t.point)})),n[0].element},p=function(e,n){return n.sort((function(n,t){return e.distanceTo(n.point)-e.distanceTo(t.point)})),n[0].point},x=function(e){var n=e.seed,t=e.currentVertex,r=e.grid,o=e.gridSize,i=[Math.floor(t.x/o),Math.floor(t.y/o)],c=i[0],f=i[1];v[n]||(v[n]={});for(var d=v[n],l=r.map((function(e){return e.point})),h=u.A.from(l.map((function(e){return[e.x,e.y]}))),p=[],g=0;g<h.triangles.length;g+=3){var x=l[h.triangles[g]],y=l[h.triangles[g+1]],m=l[h.triangles[g+2]],T=x.x*x.x+x.y*x.y,w=y.x*y.x+y.y*y.y,M=m.x*m.x+m.y*m.y,b=2*(x.x*(y.y-m.y)+y.x*(m.y-x.y)+m.x*(x.y-y.y)),E=new s.Vector3(1/b*(T*(y.y-m.y)+w*(m.y-x.y)+M*(x.y-y.y)),1/b*(T*(m.x-y.x)+w*(x.x-m.x)+M*(y.x-x.x)),0);p.push(E)}for(var k,A=[],V=function(){var e=h.halfedges[R];if(-1!==e){var n=p[Math.floor(R/3)],t=p[Math.floor(e/3)],o=new s.Vector2((n.x+t.x)/2,(n.y+t.y)/2),u="".concat(Math.floor(o.x),",").concat(Math.floor(o.y));if(void 0===d[u])for(var l in k=r.sort((function(e,n){return e.point.distanceTo(o)-n.point.distanceTo(o)})),d[u]={grid:i,joinable:k[0].element.joinable&&k[0].element===k[1].element},d){var g=(0,a.A)(d[l].grid,2),v=g[0],x=g[1];(Math.abs(c-v)>5||Math.abs(f-x)>5)&&delete d[l]}d[u].joinable||A.push(new s.Line3(n,t))}},R=0;R<h.halfedges.length;R++)V();return A},y=function(e){for(var n=e.currentVertex,t=e.walls,r=new s.Vector3(n.x,n.y,0),o=[],i=0;i<t.length;i++){var a=new s.Vector3(0,0,0);new s.Line3(t[i].start,t[i].end).closestPointToPoint(r,!0,a),o.push(a)}return o.sort((function(e,n){return e.distanceTo(r)-n.distanceTo(r)})),o[0]?r.distanceTo(o[0]):1/0},t===g.CREATE&&(m=c(o),self.postMessage(m)),t===g.CREATE_BULK&&(T=o.map((function(e){return c(e)})),self.postMessage({type:g.CREATE_BULK,results:T})),t===g.GET_DISTANCE_TO_WALL&&(w=y(o),self.postMessage(w));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}self.onmessage=function(e){x.addTask((function(){return function(e){return y.apply(this,arguments)}(e.data)}))}},1234:function(){}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,t.x=function(){var e=t.O(void 0,[456,371],(function(){return t(564)}));return e=t.O(e)},t.amdD=function(){throw new Error("define cannot be used indirect")},t.amdO={},function(){var e=[];t.O=function(n,r,o,i){if(!r){var a=1/0;for(f=0;f<e.length;f++){r=e[f][0],o=e[f][1],i=e[f][2];for(var c=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](r[u])}))?r.splice(u--,1):(c=!1,i<a&&(a=i));if(c){e.splice(f--,1);var s=o();void 0!==s&&(n=s)}}return n}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[r,o,i]}}(),t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,r){return t.f[r](e,n),n}),[]))},t.u=function(e){return"static/js/"+e+"."+{371:"1e2d1a8e",456:"2f6077d1"}[e]+".chunk.js"},t.miniCssF=function(e){},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},t.p="/",function(){var e={754:1,373:1};t.f.i=function(n,r){e[n]||importScripts(t.p+t.u(n))};var n=self.webpackChunkdotcomma=self.webpackChunkdotcomma||[],r=n.push.bind(n);n.push=function(n){var o=n[0],i=n[1],a=n[2];for(var c in i)t.o(i,c)&&(t.m[c]=i[c]);for(a&&a(t);o.length;)e[o.pop()]=1;r(n)}}(),function(){var e=t.x;t.x=function(){return Promise.all([t.e(456),t.e(371)]).then(e)}}();t.x()}();
//# sourceMappingURL=754.fe72973d.chunk.js.map